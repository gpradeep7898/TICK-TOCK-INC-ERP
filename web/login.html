<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>TICK TOCK INC. | Sign In</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --navy:    #0f1923;
  --navy2:   #162130;
  --navy3:   #1e2d40;
  --panel:   #1a2a3a;
  --border:  #243447;
  --blue:    #2563eb;
  --blue-h:  #1d4ed8;
  --blue-l:  #3b82f6;
  --text0:   #f0f4f8;
  --text1:   #94a3b8;
  --text2:   #64748b;
  --green:   #10b981;
  --red:     #ef4444;
  --radius:  10px;
}
html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;background:var(--navy);color:var(--text0)}

/* ── Layout ── */
.shell{display:flex;height:100vh;overflow:hidden}

/* ── Left Branding Panel ── */
.brand-panel{
  flex:1;display:flex;flex-direction:column;justify-content:space-between;
  background:linear-gradient(160deg,#0f1923 0%,#162130 40%,#1a2d45 100%);
  padding:48px 56px;position:relative;overflow:hidden;
}
.brand-panel::before{
  content:'';position:absolute;top:-120px;right:-80px;width:500px;height:500px;
  border-radius:50%;background:radial-gradient(circle,rgba(37,99,235,.18) 0%,transparent 70%);
  pointer-events:none;
}
.brand-panel::after{
  content:'';position:absolute;bottom:-80px;left:-40px;width:380px;height:380px;
  border-radius:50%;background:radial-gradient(circle,rgba(59,130,246,.10) 0%,transparent 70%);
  pointer-events:none;
}
.brand-top{position:relative;z-index:1}
.brand-logo{display:flex;align-items:center;gap:14px;margin-bottom:56px}
.logo-icon{
  width:48px;height:48px;border-radius:12px;
  background:linear-gradient(135deg,#2563eb,#3b82f6);
  display:flex;align-items:center;justify-content:center;
  font-size:24px;box-shadow:0 4px 20px rgba(37,99,235,.4);
}
.logo-text-wrap .company{font-size:18px;font-weight:800;letter-spacing:.04em;color:#f0f4f8}
.logo-text-wrap .sub{font-size:11px;color:var(--text2);text-transform:uppercase;letter-spacing:.12em;margin-top:2px}

.brand-headline{font-size:36px;font-weight:800;line-height:1.2;color:#f0f4f8;margin-bottom:16px}
.brand-headline span{color:var(--blue-l)}
.brand-sub{font-size:15px;color:var(--text1);line-height:1.7;max-width:380px}

.feature-list{margin-top:40px;display:flex;flex-direction:column;gap:14px}
.feature-item{display:flex;align-items:center;gap:12px;font-size:13px;color:var(--text1)}
.feature-item .dot{
  width:8px;height:8px;border-radius:50%;
  background:var(--blue-l);flex-shrink:0;
  box-shadow:0 0 8px rgba(59,130,246,.6);
}

.brand-footer{position:relative;z-index:1;font-size:12px;color:var(--text2)}

/* ── Right Login Panel ── */
.login-panel{
  width:480px;min-width:480px;background:var(--navy2);
  display:flex;flex-direction:column;justify-content:center;
  padding:48px 52px;border-left:1px solid var(--border);
  position:relative;overflow-y:auto;
}

.login-header{margin-bottom:36px}
.login-header h1{font-size:26px;font-weight:800;color:var(--text0);margin-bottom:8px}
.login-header p{font-size:14px;color:var(--text1)}

/* ── Form ── */
.form-group{margin-bottom:20px}
label{display:block;font-size:12px;font-weight:600;color:var(--text1);text-transform:uppercase;letter-spacing:.06em;margin-bottom:8px}
input[type=email],input[type=password]{
  width:100%;padding:13px 16px;
  background:var(--navy3);border:1.5px solid var(--border);border-radius:var(--radius);
  color:var(--text0);font-size:14px;font-family:inherit;
  transition:border-color .15s,box-shadow .15s;outline:none;
}
input[type=email]:focus,input[type=password]:focus{
  border-color:var(--blue);box-shadow:0 0 0 3px rgba(37,99,235,.18);
}
input.error{border-color:var(--red);box-shadow:0 0 0 3px rgba(239,68,68,.12)}
input::placeholder{color:var(--text2)}

.btn-signin{
  width:100%;padding:14px;
  background:var(--blue);border:none;border-radius:var(--radius);
  color:#fff;font-size:15px;font-weight:700;letter-spacing:.02em;
  cursor:pointer;transition:background .15s,transform .1s,box-shadow .15s;
  margin-top:8px;box-shadow:0 4px 16px rgba(37,99,235,.35);
}
.btn-signin:hover{background:var(--blue-h);box-shadow:0 6px 20px rgba(37,99,235,.45)}
.btn-signin:active{transform:scale(.98)}
.btn-signin:disabled{background:#374151;color:var(--text2);cursor:not-allowed;box-shadow:none}

/* ── Error Message ── */
.error-msg{
  display:none;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);
  border-radius:var(--radius);padding:11px 14px;margin-bottom:20px;
  color:#fca5a5;font-size:13px;align-items:center;gap:8px;
}
.error-msg.show{display:flex}
.error-msg::before{content:'⚠';font-size:15px;flex-shrink:0}

/* ── Demo Credentials ── */
.demo-box{
  margin-top:28px;background:rgba(37,99,235,.06);
  border:1px solid rgba(37,99,235,.2);border-radius:var(--radius);padding:16px;
}
.demo-box-title{font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.1em;margin-bottom:12px}
.demo-cred{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 10px;border-radius:7px;cursor:pointer;
  transition:background .12s;margin-bottom:4px;
  border:1px solid transparent;
}
.demo-cred:hover{background:rgba(37,99,235,.1);border-color:rgba(37,99,235,.25)}
.demo-cred:last-child{margin-bottom:0}
.demo-role{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.06em}
.role-admin{color:#f59e0b}
.role-warehouse{color:#10b981}
.role-sales{color:#3b82f6}
.demo-credentials{font-size:12px;color:var(--text1);font-family:'Courier New',monospace}
.demo-hint{font-size:11px;color:var(--text2);margin-top:10px;text-align:center}
.demo-hint span{color:var(--blue-l)}

/* ── Spinner ── */
.spinner{
  width:16px;height:16px;border:2px solid rgba(255,255,255,.3);
  border-top-color:#fff;border-radius:50%;animation:spin .6s linear infinite;
  display:inline-block;margin-right:8px;vertical-align:middle;
}
@keyframes spin{to{transform:rotate(360deg)}}

.login-footer{
  position:absolute;bottom:20px;left:0;right:0;text-align:center;
  font-size:11px;color:var(--text2);
}
</style>
</head>
<body>
<div class="shell">

  <!-- ── Left: Brand Panel ── -->
  <div class="brand-panel">
    <div class="brand-top">
      <div class="brand-logo">
        <div class="logo-icon">⏱</div>
        <div class="logo-text-wrap">
          <div class="company">TICK TOCK INC.</div>
          <div class="sub">Wholesale Distribution Management</div>
        </div>
      </div>

      <div class="brand-headline">
        Built for the<br><span>warehouse floor.</span>
      </div>
      <div class="brand-sub">
        A complete ERP for wholesale watch distributors — from purchase orders to customer invoices, in one place.
      </div>

      <div class="feature-list">
        <div class="feature-item"><div class="dot"></div>Real-time inventory tracking across all warehouses</div>
        <div class="feature-item"><div class="dot"></div>Sales orders → shipments → invoicing in one flow</div>
        <div class="feature-item"><div class="dot"></div>3-way match for vendor invoice approval</div>
        <div class="feature-item"><div class="dot"></div>Barcode scanning &amp; cycle count adjustments</div>
        <div class="feature-item"><div class="dot"></div>AR/AP aging reports &amp; VIP customer pricing</div>
      </div>
    </div>
    <div class="brand-footer">© 2024 Tick Tock Inc. &nbsp;·&nbsp; All rights reserved</div>
  </div>

  <!-- ── Right: Login Panel ── -->
  <div class="login-panel">
    <div class="login-header">
      <h1>Sign in to your account</h1>
      <p>Enter your credentials to access the ERP dashboard.</p>
    </div>

    <div class="error-msg" id="errorMsg"></div>

    <form id="loginForm" autocomplete="on" novalidate>
      <div class="form-group">
        <label for="email">Work Email</label>
        <input type="email" id="email" name="email" placeholder="you@ticktock.com" autocomplete="username" required/>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="••••••••" autocomplete="current-password" required/>
      </div>
      <button type="submit" class="btn-signin" id="signInBtn">Sign In</button>
    </form>

    <!-- Demo Credentials -->
    <div class="demo-box">
      <div class="demo-box-title">Demo Credentials — click to fill</div>
      <div class="demo-cred" onclick="fillCreds('admin@ticktock.com','admin123')">
        <span class="demo-role role-admin">Admin</span>
        <span class="demo-credentials">admin@ticktock.com &nbsp;/&nbsp; admin123</span>
      </div>
      <div class="demo-cred" onclick="fillCreds('warehouse@ticktock.com','wh123')">
        <span class="demo-role role-warehouse">Warehouse</span>
        <span class="demo-credentials">warehouse@ticktock.com &nbsp;/&nbsp; wh123</span>
      </div>
      <div class="demo-cred" onclick="fillCreds('sales@ticktock.com','sales123')">
        <span class="demo-role role-sales">Sales</span>
        <span class="demo-credentials">sales@ticktock.com &nbsp;/&nbsp; sales123</span>
      </div>
      <div class="demo-hint">Click a row to auto-fill &amp; <span>sign in instantly</span></div>
    </div>

    <div class="login-footer">TICK TOCK INC. ERP &nbsp;·&nbsp; v1.0.0</div>
  </div>
</div>

<script>
const API = '';

function fillCreds(email, pass) {
  document.getElementById('email').value = email;
  document.getElementById('password').value = pass;
  document.getElementById('loginForm').dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));
}

function showError(msg) {
  const el = document.getElementById('errorMsg');
  el.textContent = msg;
  el.classList.add('show');
  document.getElementById('email').classList.add('error');
  document.getElementById('password').classList.add('error');
}

function clearError() {
  const el = document.getElementById('errorMsg');
  el.classList.remove('show');
  document.getElementById('email').classList.remove('error');
  document.getElementById('password').classList.remove('error');
}

function setLoading(on) {
  const btn = document.getElementById('signInBtn');
  btn.disabled = on;
  btn.innerHTML = on
    ? '<span class="spinner"></span>Signing in…'
    : 'Sign In';
}

// Redirect if already logged in
(function checkExisting() {
  const token = localStorage.getItem('tt_token');
  if (!token) return;
  try {
    const payload = JSON.parse(atob(token.split('.')[1]));
    if (payload.exp * 1000 > Date.now()) {
      window.location.href = '/';
    }
  } catch {}
})();

document.getElementById('loginForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  clearError();

  const email    = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;

  if (!email || !password) {
    showError('Please enter your email and password.');
    return;
  }

  setLoading(true);

  try {
    const res  = await fetch(`${API}/api/auth/login`, {
      method:  'POST',
      headers: { 'Content-Type': 'application/json' },
      body:    JSON.stringify({ email, password })
    });
    const data = await res.json();

    if (!res.ok || !data.success) {
      showError(data.error || 'Login failed. Please check your credentials.');
      setLoading(false);
      return;
    }

    // Store token and user info
    localStorage.setItem('tt_token', data.data.token);
    localStorage.setItem('tt_user',  JSON.stringify(data.data.user));

    // Redirect to inventory
    window.location.href = '/';
  } catch (err) {
    showError('Unable to reach the server. Please try again.');
    setLoading(false);
  }
});
</script>
</body>
</html>
